#!/bin/bash

Exit() {
    echo $*
    exit
}

if [ ${0:0:1} == "/" ];then
    SPATH=`dirname $0`
else [ -x $PWD/$0 ]
    SPATH=$PWD/`dirname $0`
fi
pushd $SPATH >/dev/null ; SPATH=$PWD ; popd >/dev/null

sname=""
while [ -n "$1" ]; do
    echo "$1"
    case "$1" in
	"-help"|"-h"|"-?")
	    Exit "usage: $0 <branch>"
	    ;;
	"-win")
	    WIN="xterm -sb -sl 9999 -bg gold -fg black -e"
	    ;;
	"-branch")
	    shift
	    BRANCH=$1
	    ;;
	"-sname"|"-name")
	    shift
	    sname=" -sname $1 "
	    ;;
	*)
	    BRANCH=$1
    esac
    shift
done

[ -z "$BRANCH" ] && Exit "usage: $0 <branch>"

path=""
for d in `find /home/masse/svn/kred/$BRANCH -name ebin`; do 
    path="-pa $d "$path
done

$WIN erl $sname $path
