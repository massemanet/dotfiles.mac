#!/bin/sh

stem=/home/masse/Downloads/firefox-
ext=.tar.bz2
pkg_path=firefox
targ=/opt/firefox

die (){
    case "$1" in
        targ)
            echo "Target ("${2}") does not exist"
            ;;
        src)
            echo "Source ("${2}") does not exist"
            ;;
        usage)
            echo "Usage: $0 version (as in "${stem}"<vsn>"${ext}")"
            ;;
    esac
    exit 1
}

vsn="$1"
src=${stem}${vsn}${ext}

[ -n "$1" ] || die usage
[ -f ${src} ] || die src ${src}
[ -d ${targ} ] || die targ ${targ}

sudo tar -xf ${src} -C ${targ}
sudo mv ${targ}/${pkg_path} ${targ}/${vsn}
sudo rm ${targ}/current
sudo ln -s ${targ}/${vsn} ${targ}/current
